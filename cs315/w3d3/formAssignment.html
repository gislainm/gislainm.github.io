<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>
    <style>
        .wrapper {
            /* margin: 5%; */
            /* padding: 3%; */
            border: solid 2px #e9ecef;
            border-top-width: 8px;
            border-top-color: orange;
            width: 30%;
        }

        .formTitle {
            text-align: center;
            margin-bottom: 5%;
        }

        .country {
            margin-top: 1%;
            margin-bottom: 4%;
        }

        .register {
            color: white;
            background-color: orange;
            font-size: 1.2rem;
        }

        .registerBtn {
            margin-top: 5%;
        }

        .form-check {
            margin-bottom: 2%;
        }

        img {
            width: 20px;
            height: 20px;
        }
    </style>
    <script>
        (function () {
            'use strict'
            window.addEventListener('load', function () {
                const urlParams = new URLSearchParams(window.location.search);
                // if (document.getElementsByName("terms").checked == true) {
                //     console.log(true)
                // } else { console.log(false) }
                if (urlParams.entries().length == 0) {
                    return;
                } else {
                    document.getElementsByName("email")[0].value = urlParams.get("email");
                    document.getElementsByName("fname")[0].value = urlParams.get("fname");
                    document.getElementsByName("lname")[0].value = urlParams.get("lname");
                    document.getElementsByName("password")[0].value = urlParams.get("password");
                    document.getElementsByName("password2")[0].value = urlParams.get("password2")

                    if (urlParams.get("terms")) {
                        document.getElementsByName("terms")[0].checked = true;
                    }
                    if (urlParams.get("newsletter")) {
                        document.getElementsByName("newsletter")[0].checked = true;
                    }
                    if (urlParams.get("inlineRadioOptions") == "female") {
                        document.getElementById("inlineRadio2").checked = true;
                    } else {
                        document.getElementById("inlineRadio1").checked = true;
                    }
                    for (let eachOption of document.getElementsByName("country")[0].options) {
                        if (urlParams.get('country') == eachOption.value) {
                            eachOption.selected = true;
                        } else {
                            eachOption.selected = false;
                        }
                    }
                }
                function validatePassword(p1, p2) {
                    if (p1.value == p2.value) {
                        return true;
                    } else {
                        p2.value = "";
                        return false;
                    }
                }

                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                let password = document.getElementsByName("password")[0];
                let password2 = document.getElementsByName("password2")[0];
                let email = document.getElementsByName("name")[0];
                var forms = document.querySelectorAll('.needs-validation')

                // Loop over them and prevent submission
                Array.prototype.slice.call(forms)
                    .forEach(function (form) {
                        form.addEventListener('submit', function (event) {
                            if (!form.checkValidity()) {
                                event.preventDefault()
                                event.stopPropagation()
                            }
                            if (!validatePassword(password, password2)) {
                                event.preventDefault()
                                event.stopPropagation()
                            }
                            form.classList.add('was-validated')
                        }, false)
                    })
            }, false);
        })()
    </script>
</head>

<body>
    <form class="container wrapper mt-5 p-4 needs-validation" method="get" action="./preview.html" novalidate>
        <div class="row formTitle">
            <h1>Responsive Registration Form</h1>
        </div>
        <div class="row">
            <div class="input-group mb-3">
                <span class=" input-group-text" id="basic-addon1"><img
                        src="../../webDocs/assets/images/envelope.png" /></span>
                <input type="text" class="form-control" placeholder="Email" aria-label="Email" id="validationCustom01"
                    pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" name="email" required>
                <div class="valid-feedback">
                    Looks good!
                </div>
                <div class="invalid-feedback">
                    Please Enter a valid email.
                </div>
            </div>
        </div>
        <div class="row">
            <div class="input-group mb-3">
                <span class=" input-group-text" id="basic-addon1"><img
                        src="../../webDocs/assets/images/lock.png" /></span>
                <input type="password" class="form-control" placeholder="Password" name="password"
                    id="validationCustom02" pattern="(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,14}" required>
                <div class="valid-feedback">
                    Valid password!
                </div>
                <div class="invalid-feedback">
                    Please Enter a valid password.
                </div>
            </div>
        </div>
        <div class="row">
            <div class="input-group mb-3">
                <span class=" input-group-text" id="basic-addon1"><img
                        src="../../webDocs/assets/images/lock.png" /></span>
                <input type="password" class="form-control" placeholder="Re-type Password" name="password2"
                    id="validationCustom03" pattern="(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,14}" required>
                <div class="invalid-feedback">
                    Password does not match.
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <div class="input-group mb-3">
                    <span class=" input-group-text" id="basic-addon1"><img
                            src="../../webDocs/assets/images/person.png" /></span>
                    <input type="text" class="form-control" placeholder="First Name" aria-label="Fname"
                        id="validationCustom04" name="fname" required>
                    <div class="valid-feedback">
                        Great Name!
                    </div>
                    <div class="invalid-feedback">
                        Please enter your first name.
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="input-group mb-3">
                    <span class=" input-group-text" id="basic-addon1"><img
                            src="../../webDocs/assets/images/person.png" /></span>
                    <input type="text" class="form-control" placeholder="Last Name" aria-label="Lname"
                        id="validationCustom05" name="lname" required>
                    <div class="valid-feedback">
                        Great Name!
                    </div>
                    <div class="invalid-feedback">
                        Please enter your last name.
                    </div>
                </div>
            </div>
        </div>

        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="male"
                required>
            <label class="form-check-label" for="inlineRadio1">Male</label>
        </div>

        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="female">
            <label class="form-check-label" for="inlineRadio2">Female</label>
        </div>
        <div class="country ">
            <select class="form-select" aria-label="select country" name="country" required>
                <option selected disabled value="">Select a Country</option>
                <option value="U.S.A">U.S.A</option>
                <option value="Rwanda">Rwanda</option>
                <option value="Other">Other</option>
            </select>
            <div class="invalid-feedback">
                Please select a valid country.
            </div>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="checkbox" value="I agree with terms and conditions" name="terms"
                required>
            <label class="form-check-label" for="flexCheckDefault">
                I agree with terms and conditions
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="checkbox" value="I want to receive the newsletter" name="newsletter">
            <label class="form-check-label" for="flexCheckChecked">
                I want to receive the newsletter
            </label>
        </div>
        <div class="d-grid registerBtn">
            <button class="btn btn-warning register" type="submit">Register</button>
        </div>
    </form>
</body>

</html>